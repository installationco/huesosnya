<!DOCTYPE html>
<html>
 	<head>
    	<!-- 1. Load webcomponents-lite.min.js for polyfill support. -->
    	<script src="bower_components/webcomponentsjs/webcomponents-lite.min.js"></script>
		<script type="text/javascript" src="//vk.com/js/api/openapi.js?121"></script> 
		<script type="text/javascript"> 
	    	VK.init({apiId: 5148155}); 
	    	
	    </script>
    	<link rel="stylesheet" type="text/css" href="228.css">
    	<!-- 2. Use an HTML Import to bring in some elements. -->
    	<link rel="import" href="bower_components/paper-button/paper-button.html">
    	<link rel="import" href="bower_components/paper-input/paper-input.html">
    	<link rel="import" href="bower_components/paper-tabs/paper-tabs.html">
    	<link rel="import" href="bower_components/paper-tab/paper-tab.html">
    	<link rel="import" href="bower_components/paper-menu/paper-menu.html">
    	<link rel="import" href="bower_components/iron-pages/iron-pages.html">
    	<link rel="import" href="bower_components/iron-icons/iron-icons.html">
    	<link rel="import" href="bower_components/iron-icon/iron-icon.html">
    	<link rel="import" href="bower_components/paper-item/paper-item.html">
      <link rel="import" href="bower_components/paper-toolbar/paper-toolbar.html">
      <link rel="import" href="bower_components/paper-card/paper-card.html">
    	<link rel="import" href="bower_components/paper-drawer-panel/paper-drawer-panel.html">
    	<link rel="import" href="bower_components/paper-header-panel/paper-header-panel.html">
    	<link rel="import" href="bower_components/paper-fab/paper-fab.html">
      <link rel="import" href="bower_components/iron-image/iron-image.html">
      <link rel="import" href="bower_components/paper-input/paper-input.html">
    	<style is="custom-style">
        	:root {
            	--my-custom-color: rgba(250, 40, 155, .5);
            	--my-custom1-color: white;
            	--paper-tab-ink: var(--my-custom-color);

            	/* custom CSS property */
            	--paper-tabs-selection-bar-color: rgb(250, 40, 97);

            	/* custom CSS mixin */
            	--paper-tabs: {
                	color: var(--my-custom1-color); /* variable defined in default-theme.html */
                	font-size: 20px;
            	}
        	}
    	</style>
    	<script src="http://www.google.com/jsapi"></script>  
    	<script type="text/javascript">  
        	// Загружаем jQuery  
        	google.load("jquery", "1.2.6");  
        </script>
    </head>


	<body unresolved>
    <!-- 3. Declare the element. Configure using its attributes. -->


    <paper-drawer-panel>
      <paper-header-panel drawer>
      <image id="avatar" src="default.png" class="round" style="height: 6em; width: 6em; padding: 1em;"></image>
      <div id="name">Name</div>
      	<paper-menu selected="{{page}}" valueattr="data-category">
  		    <paper-item data-category="sec1">Stream</paper-item>
  		    <paper-item data-category="sec2">TopList</paper-item>
		    </paper-menu>
		    <form id="photoForm">
    		  <paper-input label="url" name="url" type="text" size="20" maxlength="100"></paper-input>
          <p>
    		    <paper-input label="Input label" name="Input label" type="text" size="30" maxlength="300">
          </p>
				  <p>
    		    <paper-button raised type="button" id="saveButton">
    		      <iron-icon icon="check"></iron-icon>
    		      OK
    		    </paper-button>
				  </p>
        </form>
        <div class="drawerFooter">Ovidiopol'skaya Pravda production</div>
      </paper-header-panel>

      <paper-header-panel main>
        <paper-toolbar id="bar">
          <paper-icon-button paper-drawer-toggle icon="menu" style="height: 3em; width: 3em;"></paper-icon-button>
          <h3>TopKek</h3>
		      <paper-icon-button  icon="account-circle" id="login_button" onclick="VK.Auth.login(authInfo);"></paper-icon-button>
        </paper-toolbar>

        <iron-pages selected="{{page}}" valueattr="data-category">
          <section data-category = "sec1">
            <paper-card>
              <div class="card-content">
                <iron-image id="rightimg" src="/img1.jpg" ></iron-image>
              </div>
              <div class="card-actions">          
                <paper-button id="kekButton" flex>Kek</paper-button>
                <paper-button flex>SemiKek</paper-button>
                <paper-button>NotKek</paper-button>
                <paper-input label="Tip something about kek"></paper-input>
                <paper-button id="submitButton">Submit</paper-button>    
              </div>
            </paper-card>
          </section>
          <section data-category = "sec2">
            <p>kek</p>
          </section>
        </iron-pages>

      </paper-header-panel>
    </paper-drawer-panel>
    <!--</template>-->

<paper-fab id="add" icon="add"></paper-fab>

    <script type="text/javascript">
    	var avatar = document.getElementById('avatar');
    	var uname = document.getElementById('name');
      var imageKek = document.getElementById('rightimg');
      var idnomb;
    	imageKek.src = "http://rlvote.96.lt/Test-Polymer/img/img"+Math.ceil(Math.random() * 3)+".jpg";
      /*
      var h = document.getElementById('rightimg').naturalHeight;
      var w = document.getElementById('rightimg').naturalWidth;
      if(w > h)
      {
        var tmp = (w/$(window).width()) * 100;
        alert(tmp);
        imageKek.css('width', tmp + '%');
      }
      else
      {
        var tmp = (h/$(window).height()) * 100;
        alert(tmp);
        imageKek.css('width', tmp + '%');      
      }*/
	    function authInfo(response) {
	    	//$.get('http://rlvote.96.lt/Test-Polymer/save.php', {message:response.session.mid}, function(data)	{
		//alert('Сервер ответил: '+data);
  			if (response.session) {
    				VK.Api.call('users.get', {user_ids: response.session.mid}, function(r) { 
  							if(r.response) {
  								idnomb = response.session.mid;
  								uname.innerHTML = r.response[0].first_name;
			   					avatar.src = r.response[0].photo_100;
  							} 
							}); 
  					}
					}
					VK.Auth.getLoginStatus(authInfo);
					//VK.UI.button('login_button');
	  </script> 


    <script> 
		var pages = document.querySelector('iron-pages'); 
		var tabs = document.querySelector('paper-menu'); 
    tabs.selected = 0;
		tabs.addEventListener('iron-select', function() { 
		  pages.selected = tabs.selected; 
		}); 

		$(function() {
 			$('#saveButton').click(function() {
  				$.ajax({
    				type: "POST", url: 'http://rlvote.96.lt/Test-Polymer/save.php', dataType: "text", success: function(data) {
      
    				}, error:function (xhr, ajaxOptions, thrownError){
      					alert(xhr.status);
      					alert(thrownError);
    				} 
  				});
 			});
		});

		$(function() {
 			$('login_button').click(function() {
  				$.ajax({
    				type: "POST", url: 'http://rlvote.96.lt/Test-Polymer/newUser.php', dataType: "text", data: ({findres: idnomb}) ,success: function(data) {
      
    				}, error:function (xhr, ajaxOptions, thrownError){
      					alert(xhr.status);
      					alert(thrownError);
    				} 
  				});
 			});
		});
		</script>

  </body>
</html>